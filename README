#README

CS 5700 Project 4 Raw Sockets
======================================================================
Team Name: amp
Team Members:
			Pratik Budhiraja (NUID: 002105546)
			Marwa Elali (NUID: 001527297)
			Haojun Zhu (NUID: 002979116)

======================================================================
This project is implemented using Python programming language

To run the program you need to change file permissions using:
	make
Then run the program using:
	./rawhttpget URL

======================================================================
High-level Approach

	- Divide the process into three layers: Application layer, Transportation layer and Network layer as in the Open Systems
	Interconnection Model.
	- The application layer obtaining the URL argument provided by the
	user from the command line. The URL will be parsed to provide
	path and destination filename.
	- With source IP address of client and destination IP address of server create sending and receiving sockets.
	- Build the TCP and IP headers after sockets created
	- Following three way handshake to make a connection before
	sending anything
	- After packing process shown below, the program will send the
	final IP datagram to corresponding remote host
	
	[Payload] -> (tcp pack) -> TCP Segment[TCP Header, Payload] 
	-> (ip pack) -> IP Datagram [IP Header, TCP Header, Payload]

	- The program will monitor and filter the packets received, and
	unpack the IP Datagram and check the validity layer by layer, while
	keep buffer for each data and sort the data according to TCP sequence number.

	IP Datagram [IP Header, TCP Header, Data] -> (ip unpack) ->
	TCP Segment[TCP Header, Data] -> (tcp unpack) -> [Data]

======================================================================
Features Implemented

 	= Features of IP packets
 		- Validating the checksums of incomming packets
 		- Setting the correct version, header length and total length,
 		protocol identifier, and checksum in each outgoing packet.
 		- Correctly set the source and destination IP in each outgoing packet.

 	= Features of TCP packets
 		- Verify the checksums of incomming TCP packets
 		- Generate correct checksums for outgoing packets
 		- Select a valid local port to send traffic on
 		- Perform the three-way handshake
 		- Correctly handle connection teardown
 		- Correctly handle sequence and acknowledgement numbers
 		- Manage the advertised window as fit
 		- Include basic timeout functionality
 		- Put out-of-order incoming packets back into the correct order
 		- Identify and discard duplicate packets.
 		- Implement a basic congestion window

======================================================================
Challenges Faced (# need more details ? #)

- The first challenge we faced was testing our code on Ubuntu Linux VM,
we keep getting the error operation not permitted when socket sending 
packets even as root user. First we thought it was because the file has the immutable flag set in its extended attributes, however after we tried
to fix this with 'sudo chattr -f filename', we are still getting the same
error. We have posted the question on piazza and finally there was something wrong with the socket set up and raw socket sendto(). It was a code error where the IP layer was not being added.

- The second challenge we faced was the implementation of checksum 
algorithm and the bitwise manipulation when compute checksum for either
sending packet or verify the packet.

- The third challenge was implementing the three way hanshake for TCP
packets.

- The fourth challenge was implementing the filter to assure we only
receive the packet belonging to our program

- Next challenge we faced was junk data in the file that was being written

- The last one was actually testing with wireshark

======================================================================
Overview on Testing (# need more details ? #)

We implemented and tested the program incrementally as we built each part of our module to ensure its functionality before combining together.

======================================================================
Work Contribution (need further discuss and decisioin)

Pratik Budhiraja : implemented TCP headers and packing/unpacking, calculating and validating checksum
Marwa Elali : implemented IP headers and packing/unpacking, putting together the runnning of the program
Haojun Zhu : adapted functionality of HTTP from project 2, helped set up virtual environment for the team, debugging

======================================================================
File Design

= headers.py 
	- module include class tcp and class ip
	- used for easily pack and unpack tcp segment and ip datagram
	- also include the function that validate checksum

= rawhttpget.py
	- Main driver of the raw socket program include the function to
	initiate three way handshake, sending & receving process, and close
	connection with server.

= test.py
	- set up for module testing, changing all the time but will not affect
	the main program

= utils.py
	- include all the utilities function such as compute checksum, all the
	parser either for URL, http header, etc. , filename parser and other 
	function for saving the file to local, also function that shift/deshift 
	flags to corresponding bitwise locations is included in this file.

======================================================================